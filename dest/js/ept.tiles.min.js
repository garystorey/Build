!function(){"use strict";"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(t){return this.match("^"+t)===t}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(t){return this.match(t+"$")===t}),"function"!=typeof String.prototype.toProperCase&&(String.prototype.toProperCase=function(){return this.toLowerCase().replace(/^(.)|\s(.)/g,function(t){return t.toUpperCase()})}),"function"!=typeof String.prototype.pad&&(String.prototype.pad=function(t,e){for(var i=this;i.length<t;)i=e?e:"0"+i;return i}),"function"!=typeof String.prototype.has&&(String.prototype.has=function(t){return this.indexOf(t)>-1}),"function"!=typeof String.prototype.replaceAll&&(String.prototype.replaceAll=function(t,e){return this.split(t).join(e)})}(),function(){"use strict";var t={debug:!1,supportURL:"http://mymacys.net/sites/EPT/workrequest/Pages/CustomerRequest.aspx",onLoadFunctions:[]};t.isEditMode=function(){return!("undefined"==typeof macysEditMode||""===$("#MSOLayout_InDesignMode").val())},t.log=function(e){window.console&&console.log&&t.debug&&console.log(e)},t.isTouch=function(){return!!("ontouchstart"in window)||!!("onmsgesturechange"in window)},t.removeHTML=function(t){if(t){var e=document.createElement("div");return e.innerHTML=t,document.all?e.innerText:e.textContent}return""},t.forEach=function(t,e,i){if("[object Object]"===Object.prototype.toString.call(t))for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(i,t[s],s,t);else for(var a=0,r=t.length;a<r;a++)e.call(i,t[a],a,t)},t.createElement=function(t){var e,i,s;if("string"==typeof t)return e=document.createElement("div"),e.innerHTML=t,e.firstChild;if(e=document.createElement(t.tag),i=document.createTextNode(t.text),e.appendChild(i),t.id&&e.setAttribute("id",t.id),t.classes)for(s=t.classes.length;s--;)e.classList.add(t.classes[s]);return e},t.removeSpecialChars=function(t){return t.replace(/[^\w\s]/gi,"")},t.removeSpaces=function(t){return t.replaceAll(" ","")},t.onLoad=function(e){t.onLoadFunctions.push(e)},t.onload=t.onLoad,t.executeOnLoad=function(){var e,i=t.onLoadFunctions,s=i.length,a=0;if(s>0)for(;a<s;a++)e=i[a],t["private"].executeFunctionByName(e);var r=document.body,n=document.createEvent("Event");n.initEvent("onLoadComplete",!0,!0),r.dispatchEvent(n)},t["private"]={executeFunctionByName:function(t,e){e=e||window;for(var i=t.split("."),s=i.pop(),a=0,r=i.length;a<r;a++)e=e[i[a]];return e[s].apply(this)},setClasses:function(){var t=navigator.userAgent.toString().toLowerCase(),e=location.href;(e.indexOf("_layout")>-1||e.indexOf("_catalog")>-1||e.indexOf("/Lists/")>-1||e.indexOf("/Forms/")>-1)&&document.body.classList.add("systempage"),document.body.classList.add("js"),document.body.classList.remove("no-js"),t.indexOf("trident")>-1&&document.body.classList.add("ie"),t.indexOf("ipad")>-1&&document.body.classList.add("ipad"),t.indexOf("android")>-1&&document.body.classList.add("android")}},window.ept=t}(),function(t){"use strict";document.addEventListener("DOMContentLoaded",function(){t["private"].setClasses(),t.executeOnLoad()})}(ept),function(t){"use strict";var e,i;e=function(){var i,s;return this instanceof e?(this.data={},this.badge="",this.set=t,this.column=t,this.row=t,this.icon=t,this.size=t,this.color=t,this.url=t,this.target=t,this.title=t,this.description=t,this.id=t,this.type=t,this.el=t,this.parent=t,void 0):(i=new e,s=e.apply(i,arguments),s===t?i:s)},e.prototype.init=function(){if("string"==typeof this.data)try{this.data=JSON.parse(this.data)}catch(e){throw new Error("Tile Error: Unable to parse json data.")}if(this.url=this.url?this.url:this.data&&this.data.url?this.data.url:t,this.id=this.id?this.id:this.data&&this.data.id?this.data.id:t,this.title=this.title?this.title:this.data&&this.data.title?this.data.title:t,this.set=this.set?this.set+"":this.data&&this.data.set?this.data.set+"":"1",this.column=this.column?this.column:this.data&&this.data.column?this.data.column:"A",this.row=this.row?this.row:this.data&&this.data.row?this.data.row:1,this.icon=this.icon?this.icon:this.data&&this.data.icon?this.data.icon:"None",this.badge=this.badge?this.badge:this.data&&this.data.badge?this.data.badge:0,this.size=this.size?this.size:this.data&&this.data.size?this.data.size:"2x2",this.color=this.color?this.color:this.data&&this.data.color?this.data.color:"Gray",this.target=this.target?this.target:this.data&&this.data.target?this.data.target:"",this.type=this.type?this.type:this.data&&this.data.type?this.data.type:"standard",this.description=this.description?this.description:this.data&&this.data.description?this.data.description:"",this.tiledescription=this.tiledescription?this.tiledescription:this.data&&this.data.tiledescription?this.data.tiledescription:"",this.hasDescription=this.hasDescription?this.hasDescription:this.data&&this.data.hasDescription?this.data.hasDescription:"",this.parent=this.parent?this.parent:this.data&&this.data.parent?this.data.parent:t,!this.set)throw new Error("Tile Error: Tileset has not been defined.");if(!this.url)throw new Error("Tile Error: URL has not been defined.");if(!this.title)throw new Error("Tile Error: Title has not been defined.");if(this.id=this.id||this["private"].uniqueName(this),!this.id)throw new Error("Tile Error: ID has not been defined.");this.hasBadge=this.badge?"macys-tile-has-badge":"macys-tile-no-badge",this.grouptileclass="group"===this.type?"macys-tile-popup":"",this.tilelocation=this.column+this.row+"",this.hasDescription="1x1"===this.size||"2x1"===this.size||"1x2"===this.size?"macys-tile-no-desc":this.hasDescription?this.hasDescription:"macys-tile-no-desc"},e.prototype.add=function(){var t="";return this.init(),this.data=this.templates.toJson(this),t=this["private"].build(this),this.parent.appendChild(this["private"].convertToElement(t)),this.el=this.id?document.getElementById(this.id):this.parent.querySelector("[data-location="+this.column+this.row+"]"),this},e.prototype.remove=function(){var t=document.getElementById(this.id);t.parentNode.removeChild(t)},e.prototype.update=function(){this.remove(),this.add()},e.prototype.get=function(t){this.data=document.getElementById(t).getAttribute("data-tile"),this.init()},e.prototype["private"]={},e.prototype["private"].build=function(t){var e=t["private"].templates.base(),i=t.type.toLowerCase();"weather"!==i&&"stocks"!==i||(t.type="standard"),e=t["private"].replaceAll(e,"{{html}}",t.templates[t.type]());for(var s in t)t.hasOwnProperty(s)&&(e=t["private"].replaceAll(e,"{{"+s+"}}",t[s]));return e},e.prototype["private"].convertToElement=function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild},e.prototype["private"].uniqueName=function(t){var e="tile-"+t.set.toString()+"-"+t.title.toString();return e.toLowerCase().replace(/\s+/g,"")},e.prototype["private"].replaceAll=function(t,e,i){var s=new RegExp(e,"g");return t.replace(s,i)},e.prototype["private"].templates={},e.prototype["private"].templates.base=function(){return'<div id="{{id}}" data-tile-set="{{set}}" data-tile-type="{{type}}" data-location="{{tilelocation}}" class="macys-tile macys-tile-size-{{size}} macys-tile-color-{{color}} macys-tile-row{{row}} macys-tile-col{{column}} animated fadeIn" title="{{tiledescription}}" data-tile=\'{{data}}\' ><a class="{{grouptileclass}} {{hasDescription}} {{hasBadge}}" href="{{url}}" target="{{target}}"  title="{{tiledescription}}"><div class="macys-tile-html">{{html}}</div></a></div>'},e.prototype.templates={},e.prototype.templates.standard=function(){return'<div class="macys-tile-front"><div class="macys-tile-badge">{{badge}}</div><div class="macys-tile-main-icon macys-tile-icon macys-tile-icon-{{icon}}"></div><div class="macys-tile-BottomCenter macys-tile-title">{{title}}</div></div><div class="macys-tile-back"><div class="macys-tile-back-header">{{title}}</div><div class="macys-tile-back-desc">{{description}}</div></div>'},e.prototype.templates.group=function(){return'<div class="macys-tile-group macys-tile-no-desc macys-tile-front"><div class="macys-tile-icon macys-tile-TopLeft macys-tile-icon-waffle"></div><div class="macys-tile-badge">{{badge}}</div><div class="macys-tile-main-icon macys-tile-icon macys-tile-icon-{{icon}}"></div><div class="macys-tile-BottomCenter macys-tile-title">{{title}}</div></div><div class="macys-tile-back"><div class="macys-tile-back-header">{{title}}</div><div class="macys-tile-back-desc">{{description}}</div></div>'},e.prototype.templates.weather=function(){return'<div class="macys-tile-weather macys-tile-no-desc"><div class="macys-tile-weather-icon"><img src="{{image}}"/></div><div class="macys-tile-weather-temperature">{{temperature}}°</div><div class="macys-tile-weather-high">{{lowtemp}}° &nbsp;-&nbsp; {{hightemp}}°</div><div class="macys-tile-BottomCenter macys-tile-title"><div class="macys-tile-header">{{title}}</div></div></div>'},e.prototype.templates.stocks=function(){return'<div class="macys-tile-stocks macys-tile-no-desc"><div class="macys-tile-stocks-date">{{date}}</div><div class="macys-tile-stocks-trend macys-tile-stocks-trend-{{trend}} macys-icon-{{trend}}"></div><div class="macys-tile-stocks-value">{{value}}</div><div class="macys-tile-stocks-change">{{change}}&nbsp;<span class="macys-tile-stocks-percentage">{{percent}}</span><span class="macys-linktile-super"><super>*</super></span></div><div class="macys-tile-BottomCenter macys-tile-title"><div class="macys-tile-header">{{title}}</div></div></div>'},e.prototype.templates.toJson=function(t){var e="{";for(var i in t)if(t.hasOwnProperty(i))switch(i){case"el":e+='"'+i+'" : "'+t.id+'",';break;case"parent":e+='"'+i+'" : "'+t[i].id+'",';break;case"data":break;default:e+='"'+i+'" : "'+t[i]+'",'}return e=e.slice(0,e.length-1)+"}"},window.Tile=e,i=function(){var e,s;return this instanceof i?(this.data={},this.width=t,this.height=t,this.id=t,this.startAt=t,this.startHeight=t,this.startWidth=t,this.display=t,this.parent=t,this.el=t,void 0):(e=new i,s=i.apply(e,arguments),s===t?e:s)},i.prototype.init=function(){if(this.id=this.id?this.id:this.data.id?this.data.id:t,this.width=this.width?this.width:this.data.width?this.data.width:2,this.height=this.height?this.height:this.data.height?this.data.height:1,this.startAt=this.startAt?this.startAt:this.data.startAt?this.data.startAt:"A1",this.display=this.display?this.display:this.data.display?this.data.display:"show",this.id||(this.id=this["private"].uniqueName(this)),!this.parent)throw new Error("TileSet Error: Parent has not been defined.");this["private"].getStart(this),this["private"].build(this)},i.prototype.getId=function(){return this.id},i.prototype.add=function(t){for(var i,s=0,a=t.length;s<a;s++)i=new e,t[s].parent=this.el,i.data=t[s],i.add()},i.prototype["private"]={},i.prototype["private"].templates={},i.prototype["private"].templates.tileset=function(){return'<div id="{{id}}" class="macys-tile-container macys-tile-container-height-{{height}} macys-tile-container-width-{{width}} macys-tile-{{display}} " data-tileset="{{id}}"></div>'},i.prototype["private"].getStart=function(t){for(var e,i,s=0,a=t.startAt.length,r="",n="";s<a;s++)e=t.startAt.charAt(s)+"","0123456789".indexOf(e)>-1?r+=e.trim():n+=e.trim();if(0===n.length)throw new Error("TileSet Error: Invalid starting location (column).");if(i=parseInt(r,10),i<1||i>13)throw new Error("TileSet Error: Invalid starting location (row).");t.startHeight=n,t.startWidth=r},i.prototype["private"].convertToElement=function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild},i.prototype["private"].build=function(t){var e,i=t["private"].templates.tileset();i=t["private"].replaceAll(i,"{{height}}",t.height),i=t["private"].replaceAll(i,"{{id}}",t.id),i=t["private"].replaceAll(i,"{{width}}",t.width),i=t["private"].replaceAll(i,"{{startHeight}}",t.startHeight),i=t["private"].replaceAll(i,"{{startWidth}}",t.startWidth),i=t["private"].replaceAll(i,"{{display}}",t.display||"show"),t.parent=e=document.querySelector(t.parent),e.appendChild(t["private"].convertToElement(i)),t.el=e.querySelector("#"+t.id),"show"!==t.display&&"true"!==t.display&&(t.parent.style.display="none")},i.prototype["private"].replaceAll=function(t,e,i){var s=new RegExp(e,"g");return t.replace(s,i)},i.prototype["private"].uniqueName=function(t){var e="tileset-";return t.id||(t.id=Math.floor(1e4*Math.random())),e+=t.id.toString().toLowerCase().replace(/\s+/g,"")},window.TileSet=i}(),function(t){"use strict";var e={},i=[],s=function(t,e){return t.getAttribute("data-"+e)},a=function(){return{tiles:[],height:1,width:2,display:"hide",parent:"",set:""}},r=function(t,e){return e=e.trim(),"1x1"===t&&"2x1"===t&&"1x2"===t||!e?"macys-tile-no-desc":"macys-tile-desc"},n=function(){var e=document.querySelectorAll(".macys-tile-container");t.forEach(e,function(t){t.classList.contains("macys-tile-show")||t.classList.contains("macys-tile-hide")||(t.classList.add("macys-tile-hide"),t.parentNode.setAttribute("style",""))})},o=function(){var t=document.querySelector(".macys-tile-overlay"),e=t.getAttribute("data-show")+"".toLowerCase();t.style.display="none",t.setAttribute("data-opener",""),t.setAttribute("data-showing",""),e=document.getElementById(e),e.setAttribute("style",""),e.style.display="none",e.querySelector(".macys-tile-container").classList.add("macys-tile-hide")},d=function(){var e=document.querySelector(".macys-tile-overlay");return e||(e=t.createElement({tag:"div",text:"",id:"",classes:["macys-tile-overlay"]})),document.body.appendChild(e),e.addEventListener("click",o),e},l=function(){return{title:"",id:"",set:"",badge:"",type:"standard",url:"#",icon:"None",color:"Red",size:"1x1",row:"A",column:"1",target:"",description:"",tiledescription:"",hasDescription:"macys-tile-no-desc",isGroupTile:!1}},c=function(e){t.log("fn:parseUrl");var i={},s=e.split("?");if(e=s[1]){var a=e.split("&");if(a.length)for(var r,n=0;n<a.length;n++)r=a[n].toString().toLowerCase().split("="),i[decodeURI(r[0])]=r.length>1?decodeURI(r[1]):""}return i.set?i.set=i.set.trim():i.set="1",i.startLocation?i.startLocation=i.startLocation.trim():i.startLocation="A1",i.height?i.height=i.height.trim():i.height="1",i.width?i.width=i.width.trim():i.width="2",i},h=function(e,i,a){var n=e.querySelector("a"),o=s(e,"size")+"",d=n.innerHTML,h=s(e,"type")+"",u=l(),y=n.getAttribute("title");if(y=y?y+"":"",t.log("i:"+i),h=h.toLowerCase(),u.title=d.trim(),u.id=a.set+"-"+(i+1),u.set=a.set+"",u.badge=s(e,"badge")+"",u.icon=s(e,"icon")+"",u.color=s(e,"color")+"",u.size=o,u.row=s(e,"row")+"",u.column=s(e,"column")+"",u.description=y,u.tiledescription=n.getAttribute("title"),u.hasDescription=r(o,y),u.target=n.getAttribute("target")+"",u.type=h,"standard"===h&&(u.isGroupTile=!1,u.url=n.getAttribute("href")),"group"===h){var m=c(n.getAttribute("href")),v="javascript:tiles.open('{{set}}','"+u.set+"');";u.isGroupTile=!0,u.url=v.replace("{{set}}",t.removeSpecialChars(t.removeSpaces(m.set)))}return"weather"!==h&&"stocks"!==h||(u.isGroupTile=!1,u.url="#",g("http://mymacys.net/Pages/stockandweatherdata.aspx?type="+h,p)),u},p=function(e){t.log(e)},u=function(r,n){var o=s(r,"tileset"),d=r.querySelectorAll("li"),l=a();t.log("i:"+n),l.parent="#tileset-holder-"+o,l.display=s(r,"display")+"",l.set=o,l.height=s(r,"tile-height")+"",l.width=s(r,"tile-width")+"",t.forEach(d,function(t,e){i.push(h(t,e,l))}),l.tiles=i,e.createSet(l),i.length=0},y=function(t){var e=[t.scrollHeight,t.clientHeight,t.offsetHeight].sort();return e[0]+10},m=function(t){var e=[t.scrollWidth,t.clientWidth,t.offsetWidth].sort();return e[0]+10},v=function(e){t.log("fn:centerTileSet");var i=Math.max(0,(window.innerHeight-y(e))/2),s=Math.max(0,(window.innerWidth-m(e))/2);i>250&&(i=250),e.style.top=i+"px",e.style.left=s+"px"},f=function(t,e){var i=new XMLHttpRequest;return"withCredentials"in i?i.open(e,t,!0):"undefined"!=typeof XDomainRequest?(i=new XDomainRequest,i.open(e,t)):i=null,i},g=function(e,i,s){s=s||"GET";var a=f(e,s);return a?(a.onload=function(){i(a.reponseText)},a.onerror=function(){t.log("Woops, there was an error making the request.")},void a.send()):void t.log("CORS not supported")};e.check=function(e,i){var a,r,n;t.log("mp.menu.tiles.check"),t.log("event: "+e),t.isEditMode()||(a=i?document.getElementById(i.id):document.body,r=a.querySelectorAll("ul[data-tileset]"),t.forEach(r,function(e,i){n=t.createElement({tag:"div",id:"tileset-holder-"+s(e,"tileset"),text:""}),r[i].parentNode.appendChild(n),u(e,i),e.parentNode.removeChild(e)}))},e.createSet=function(e){t.log("fn:mp.menu.tiles.createSet");var i,s=new TileSet;return s.parent=e.parent,s.height=e.height,s.width=e.width,s.display=e.display,s.startAt="A1",s.init(),s.add(e.tiles),i=s.getId(),s=null,i},e.open=function(t,e){var i=document.getElementById("tileset-holder-"+t),s=i.querySelector(".macys-tile-container"),a=d();n(),a.setAttribute("data-opener","tileset-holder-"+e),a.setAttribute("data-show","tileset-holder-"+t),a.style.display="block",a.style.transform="scale(1)",i.style.backgroundColor="#fff",i.style.position="absolute",i.style.display="block",i.style.zIndex=1000001,i.style.padding="10px",v(i),s.classList.remove("macys-tile-hide")},window.tiles=e,t.onLoad("tiles.check")}(ept);